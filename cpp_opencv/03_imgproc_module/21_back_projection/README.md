# 背投影（back projection）
在本节，我们将会学习
1. 背投影是什么以及它有什么用途
2. 怎样使用opencv的函数`cv::calcBackProject`来计算背投影
3. 如何使用opencv的函数`cv::mixChannels`来将输入图像的不同通道映射到输出结果图像的不同通道里。

## 理论
1. 什么是背投影
- 背投影是一种手段，可以记录一张图片的像素有多么匹配一个直方图里的像素分布
- 简单来说：背投影，我们计算**一个特征**的直方图模型，然后使用这个直方图模型在一幅图像里找到这个特征。
- 应用实例：如果你有肉色的直方图（比如一个hs直方图）,那么你能使用它在另一幅图像中找到肉色的区域。

## 处理方式
1. 比如说现在有一个直方图`h1`统计的是肉色这个特征
2. 对于一幅待检测图像中的每个像素，读出这个像素值所属的bin在直方图h1中的值
3. 将这个值存储到一幅新图像的相同位置。（backprojection,所以直方图h1中的值的范围最好是经过标准化的，使得结果图像可以很好的显示）

> 应用上述的背投影操作，与肉色这个特征越匹配的像素亮度越大。

## 程序说明
1. 加载一张图片
2. 将图片转到hsv颜色空间，通过函数`cv::mixChannels`分离出`hue`通道用来生成直方图
3. 让用户输入数字确定提取直方图的bin数量
4. 计算直方图，并且使用该直方图对原图进行背投影操作
5. 显示背投影结果和直方图

## 函数说明
[函数`cv::mixChannels`](https://docs.opencv.org/3.4.1/d2/de8/group__core__array.html#ga51d768c270a1cdd3497255017c4504be)
作用：将输入图像的不同通道映射到输出结果图像的不同通道里

[函数`cv::calcBackProject`](https://docs.opencv.org/3.4.1/d6/dc7/group__imgproc__hist.html#ga3a0af640716b456c3d14af8aee12e3ca)

